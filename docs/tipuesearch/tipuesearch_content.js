var tipuesearch = {"pages":[{"title":" ","text":"fproj Proj is a library for working with coordinate transformations and geographical projections in spatial problems.  This is a modern fortran interface that only includes the common procedures of the proj library. Motivation Get the code Clone the repository git clone https://github.com/khaors/fproj\ncd fproj Compilation with fmp The Fortran Package Manager (fpm) can be used to build fproj using the provided fpm.toml file: fpm build --profile release Testing The test can be executed using: fpm test --profile release Documentation The documentation of the library can be accessed in the following links: html files Licensing, Authors, Acknowledgements fproj was written by Oscar Garcia-Cabrejo and is distributed under the MIT license . You can cite fproj in research publications and reports as follows:\n* Garcia-Cabrejo, O. (2025). fproj: A modern Fortran port of the proj library . https://github.com/khaors/fproj. Accessed: day month year . BibTeX entry: @misc{Garcia-Cabrejo25, author = {Garcia-Cabrejo, O}, title  = {{ fproj : A modern Fortran port of the proj library }} , year   = 2025, howpublished = {\\url{https://github.com/khaors/fproj}}, note   = {Accessed: day month year} } Developer Info Oscar Garcia-Cabrejo","tags":"home","loc":"index.html"},{"title":"transformer –  ","text":"type, public :: transformer Inherits type~~transformer~~InheritsGraph type~transformer transformer pj pj type~transformer->pj pj_obj pj_area pj_area type~transformer->pj_area area pj_context pj_context type~transformer->pj_context pj_context_obj pj_coord pj_coord type~transformer->pj_coord coord_values, original_values type~crs CRS type~transformer->type~crs from, to type~crs->pj pj_obj Help Graph Key Nodes of different colours represent the following: Graph Key Type Type This Page's Entity This Page's Entity Solid arrows point from a derived type to the parent type which it\nextends. Dashed arrows point from a derived type to the other\ntypes it contains as a components, with a label listing the name(s) of\nsaid component(s). Type-Bound Procedures generic, public :: create => create_from_crs_numbers , create_from_crs_strings public  subroutine create_from_crs_numbers (my_transformer, code_from, code_to) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer integer :: code_from integer :: code_to public  subroutine create_from_crs_strings (my_transformer, string_from, string_to) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer character(len=*) :: string_from character(len=*) :: string_to procedure, public :: create_from_crs_numbers public  subroutine create_from_crs_numbers (my_transformer, code_from, code_to) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer integer :: code_from integer :: code_to procedure, public :: create_from_crs_strings public  subroutine create_from_crs_strings (my_transformer, string_from, string_to) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer character(len=*) :: string_from character(len=*) :: string_to procedure, public :: destroy => destroy_transformer public  subroutine destroy_transformer (my_transformer) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer procedure, public :: transform => transform_values public  subroutine transform_values (my_transformer, coord, display) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer real(kind=wp), dimension(:,:) :: coord logical, optional :: display procedure, public :: transform_inverse => transform_inverse_values public  subroutine transform_inverse_values (my_transformer, coord, display) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer real(kind=wp), dimension(:,:) :: coord logical, optional :: display procedure, public :: write => write_transform public  subroutine write_transform (my_transformer, unit_, format_) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer integer :: unit_ character(len=*) :: format_ Source Code type transformer private type ( CRS ) :: from , to type ( pj_context ) :: pj_context_obj type ( pj_area ) :: area type ( pj ) :: pj_obj type ( pj_coord ), allocatable :: coord_values (:), original_values (:) contains procedure , public :: create_from_crs_numbers procedure , public :: create_from_crs_strings generic , public :: create => create_from_crs_numbers ,& create_From_crs_strings procedure , public :: destroy => destroy_transformer procedure , public :: transform => transform_values procedure , public :: transform_inverse => transform_inverse_values procedure , public :: write => write_transform end type transformer","tags":"","loc":"type\\transformer.html"},{"title":"CRS –  ","text":"type, public :: CRS Inherits type~~crs~~InheritsGraph type~crs CRS pj pj type~crs->pj pj_obj Help Graph Key Nodes of different colours represent the following: Graph Key Type Type This Page's Entity This Page's Entity Solid arrows point from a derived type to the parent type which it\nextends. Dashed arrows point from a derived type to the other\ntypes it contains as a components, with a label listing the name(s) of\nsaid component(s). Inherited by type~~crs~~InheritedByGraph type~crs CRS type~transformer transformer type~transformer->type~crs from, to Help Graph Key Nodes of different colours represent the following: Graph Key Type Type This Page's Entity This Page's Entity Solid arrows point from a derived type to the parent type which it\nextends. Dashed arrows point from a derived type to the other\ntypes it contains as a components, with a label listing the name(s) of\nsaid component(s). Type-Bound Procedures procedure, public :: create_from_epsg_number public  subroutine create_from_epsg_number (my_crs, epsg_code) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs integer :: epsg_code procedure, public :: create_from_epsg_string public  subroutine create_from_epsg_string (my_crs, epsg_string) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs character(len=*) :: epsg_string procedure, public :: create_from_proj4 public  subroutine create_from_proj4 (my_crs, proj_string) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs character(len=*) :: proj_string procedure, public :: destroy => destroy_crs public  subroutine destroy_crs (my_crs) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs procedure, public :: write => write_crs public  subroutine write_crs (my_crs, unit_, fmt) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs integer :: unit_ character(len=*) :: fmt Source Code type CRS private character ( len = NUMCHAR ) :: epsg_string integer :: epsg_code character ( len = NUMCHAR ) :: proj_string type ( pj ) :: pj_obj contains procedure , public :: create_from_epsg_number procedure , public :: create_from_epsg_string procedure , public :: create_from_proj4 procedure , public :: destroy => destroy_crs !generic,operator (==) => crs_equal procedure , public :: write => write_crs end type CRS","tags":"","loc":"type\\crs.html"},{"title":"create_from_crs_numbers – ","text":"public  subroutine create_from_crs_numbers(my_transformer, code_from, code_to) Type Bound transformer Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer integer :: code_from integer :: code_to Calls proc~~create_from_crs_numbers~~CallsGraph proc~create_from_crs_numbers transformer%create_from_crs_numbers proj_create_crs_to_crs proj_create_crs_to_crs proc~create_from_crs_numbers->proj_create_crs_to_crs Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Variables Type Visibility Attributes Name Initial character(len=13), public :: proj_from character(len=13), public :: proj_to Source Code subroutine create_from_crs_numbers ( my_transformer , code_from , code_to ) !======================================================================================== class ( transformer ) :: my_transformer integer :: code_from , code_to ! character ( len = 13 ) :: proj_from , proj_to ! write ( proj_from , '(I8)' ) code_from ; write ( proj_to , '(I8)' ) code_to ; proj_from = \"EPSG:\" // trim ( proj_from ); proj_to = \"EPSG:\" // trim ( proj_to ); ! my_transformer % pj_obj = proj_create_crs_to_crs (& pj_context_default , & trim ( proj_from ) // c_null_char , & trim ( proj_to ) // c_null_char ,& my_transformer % area ); ! end subroutine create_from_crs_numbers","tags":"","loc":"proc\\create_from_crs_numbers.html"},{"title":"create_from_crs_strings – ","text":"public  subroutine create_from_crs_strings(my_transformer, string_from, string_to) Type Bound transformer Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer character(len=*) :: string_from character(len=*) :: string_to Calls proc~~create_from_crs_strings~~CallsGraph proc~create_from_crs_strings transformer%create_from_crs_strings error_stop error_stop proc~create_from_crs_strings->error_stop proj_create_crs_to_crs proj_create_crs_to_crs proc~create_from_crs_strings->proj_create_crs_to_crs starts_with starts_with proc~create_from_crs_strings->starts_with Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Source Code subroutine create_from_crs_strings ( my_transformer , string_from , string_to ) !======================================================================================== class ( transformer ) :: my_transformer character ( len =* ) :: string_from , string_to ! if ( starts_with ( string_from , \"EPSG:\" ) . and . starts_with ( string_to , \"EPSG:\" )) then my_transformer % pj_obj = proj_create_crs_to_crs (& pj_context_default , & trim ( string_from ) // c_null_char , & trim ( string_to ) // c_null_char ,& my_transformer % area ); else call error_stop ( msg = \"The EPSG codes do not start with EPSG:\" ); endif end subroutine create_from_crs_strings","tags":"","loc":"proc\\create_from_crs_strings.html"},{"title":"destroy_transformer – ","text":"public  subroutine destroy_transformer(my_transformer) Type Bound transformer Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer Calls proc~~destroy_transformer~~CallsGraph proc~destroy_transformer transformer%destroy_transformer proc~destroy_crs CRS%destroy_crs proc~destroy_transformer->proc~destroy_crs proj_destroy proj_destroy proc~destroy_transformer->proj_destroy proc~destroy_crs->proj_destroy Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Source Code subroutine destroy_transformer ( my_transformer ) !======================================================================================== class ( transformer ) :: my_transformer ! if ( allocated ( my_transformer % coord_values )) then deallocate ( my_transformer % coord_values ); endif ! if ( allocated ( my_transformer % original_values )) then deallocate ( my_transformer % original_values ); endif ! call my_transformer % from % destroy (); call my_transformer % to % destroy (); ! my_transformer % pj_obj = proj_destroy ( my_transformer % pj_obj ); ! end subroutine destroy_transformer","tags":"","loc":"proc\\destroy_transformer.html"},{"title":"transform_inverse_values – ","text":"public  subroutine transform_inverse_values(my_transformer, coord, display) Type Bound transformer Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer real(kind=wp), dimension(:,:) :: coord logical, optional :: display Calls proc~~transform_inverse_values~~CallsGraph proc~transform_inverse_values transformer%transform_inverse_values check check proc~transform_inverse_values->check proj_trans_f proj_trans_f proc~transform_inverse_values->proj_trans_f Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Variables Type Visibility Attributes Name Initial integer, public :: i integer, public :: res Source Code subroutine transform_inverse_values ( my_transformer , coord , display ) !======================================================================================== class ( transformer ) :: my_transformer real ( kind = wp ), dimension (:,:) :: coord logical , optional :: display ! integer :: res , i ! if ( allocated ( my_transformer % coord_values )) then deallocate ( my_transformer % coord_values ); endif if ( allocated ( my_transformer % original_values )) then deallocate ( my_transformer % original_values ); endif ! my_transformer % coord_values % x = coord (:, 1 ); my_transformer % coord_values % y = coord (:, 2 ); my_transformer % original_values = my_transformer % coord_values ; ! res = proj_trans_f ( my_transformer % pj_obj , & pj_inv , my_transformer % coord_values ); call check ( res == 0 , msg = 'Error during inverse transformation' ); if ( present ( display )) then if ( display ) then call my_transformer % write ( 6 , '(2f15.6)' ); endif endif ! end subroutine transform_inverse_values","tags":"","loc":"proc\\transform_inverse_values.html"},{"title":"transform_values – ","text":"public  subroutine transform_values(my_transformer, coord, display) Type Bound transformer Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer real(kind=wp), dimension(:,:) :: coord logical, optional :: display Calls proc~~transform_values~~CallsGraph proc~transform_values transformer%transform_values check check proc~transform_values->check proj_trans_f proj_trans_f proc~transform_values->proj_trans_f Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Variables Type Visibility Attributes Name Initial integer, public :: ierr integer, public :: number_data integer, public :: res Source Code subroutine transform_values ( my_transformer , coord , display ) !======================================================================================== class ( transformer ) :: my_transformer real ( kind = wp ), dimension (:,:) :: coord logical , optional :: display ! integer :: number_data , ierr , res ! if ( allocated ( my_transformer % coord_values )) then deallocate ( my_transformer % coord_values ); endif if ( allocated ( my_transformer % original_values )) then deallocate ( my_transformer % original_values ); endif ! write ( * , * ) 'Before assignment' ; number_data = size ( coord , 1 ); allocate ( my_transformer % coord_values ( number_data ), stat = ierr ); call check ( ierr == 0 , msg = 'Error while allocating memory for coord_values array' ); my_transformer % coord_values (:)% x = coord (:, 1 ); my_transformer % coord_values (:)% y = coord (:, 2 ); write ( * , * ) 'After assignment' ; my_transformer % original_values = my_transformer % coord_values ; ! res = proj_trans_f ( my_transformer % pj_obj , & pj_fwd , my_transformer % coord_values ); call check ( res == 0 , msg = 'Error during transformation' ); ! if ( present ( display )) then if ( display ) then call my_transformer % write ( 6 , '(I4,2f15.6)' ); endif endif ! end subroutine transform_values","tags":"","loc":"proc\\transform_values.html"},{"title":"write_transform – ","text":"public  subroutine write_transform(my_transformer, unit_, format_) Type Bound transformer Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer integer :: unit_ character(len=*) :: format_ Variables Type Visibility Attributes Name Initial integer, public :: i Source Code subroutine write_transform ( my_transformer , unit_ , format_ ) !======================================================================================== class ( transformer ) :: my_transformer integer :: unit_ character ( len =* ) :: format_ ! integer :: i ! if ( allocated ( my_transformer % coord_values )) then do i = 1 , size ( my_transformer % coord_values ); write ( unit_ , format_ ) i , my_transformer % coord_values ( i )% x ,& my_transformer % coord_values ( i )% y ; enddo endif ! end subroutine write_transform","tags":"","loc":"proc\\write_transform.html"},{"title":"create_from_epsg_number – ","text":"public  subroutine create_from_epsg_number(my_crs, epsg_code) Type Bound CRS Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs integer :: epsg_code Calls proc~~create_from_epsg_number~~CallsGraph proc~create_from_epsg_number CRS%create_from_epsg_number proj_create proj_create proc~create_from_epsg_number->proj_create Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Variables Type Visibility Attributes Name Initial character(len=8), public :: current_epsg_number Source Code subroutine create_from_epsg_number ( my_crs , epsg_code ) !======================================================================================== class ( CRS ) :: my_crs integer :: epsg_code ! character ( len = 8 ) :: current_epsg_number ! Check if epsg_code starts with \"EPSG:\" my_crs % epsg_code = epsg_code ; write ( current_epsg_number , '(I8)' ) epsg_code ; my_crs % epsg_string = 'EPSG:' // trim ( current_epsg_number ); write ( * , * ) 'EPSG String= ' , trim ( my_crs % epsg_string ); my_crs % pj_obj = proj_create ( pj_context_default , trim ( my_crs % epsg_string ) // & c_null_char ); ! end subroutine create_from_epsg_number","tags":"","loc":"proc\\create_from_epsg_number.html"},{"title":"create_from_epsg_string – ","text":"public  subroutine create_from_epsg_string(my_crs, epsg_string) Type Bound CRS Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs character(len=*) :: epsg_string Calls proc~~create_from_epsg_string~~CallsGraph proc~create_from_epsg_string CRS%create_from_epsg_string error_stop error_stop proc~create_from_epsg_string->error_stop proj_create proj_create proc~create_from_epsg_string->proj_create starts_with starts_with proc~create_from_epsg_string->starts_with Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Source Code subroutine create_from_epsg_string ( my_crs , epsg_string ) !======================================================================================== class ( CRS ) :: my_crs character ( len =* ) :: epsg_string ! if ( starts_with ( trim ( epsg_string ), \"EPSG:\" )) then my_crs % epsg_string = trim ( epsg_string ); my_crs % pj_obj = proj_create ( pj_context_default , trim ( my_crs % epsg_string ) // & c_null_char ); else call error_stop ( msg = \"The EPSG code does not start with EPSG:\" ); endif ! end subroutine create_from_epsg_string","tags":"","loc":"proc\\create_from_epsg_string.html"},{"title":"create_from_proj4 – ","text":"public  subroutine create_from_proj4(my_crs, proj_string) Type Bound CRS Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs character(len=*) :: proj_string Calls proc~~create_from_proj4~~CallsGraph proc~create_from_proj4 CRS%create_from_proj4 proj_create proj_create proc~create_from_proj4->proj_create Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Source Code subroutine create_from_proj4 ( my_crs , proj_string ) !======================================================================================== class ( CRS ) :: my_crs character ( len =* ) :: proj_string ! my_crs % proj_string = trim ( proj_string ); my_crs % pj_obj = proj_create ( pj_context_default , trim ( my_crs % proj_string ) // & c_null_char ); ! end subroutine create_from_proj4","tags":"","loc":"proc\\create_from_proj4.html"},{"title":"destroy_crs – ","text":"public  subroutine destroy_crs(my_crs) Type Bound CRS Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs Calls proc~~destroy_crs~~CallsGraph proc~destroy_crs CRS%destroy_crs proj_destroy proj_destroy proc~destroy_crs->proj_destroy Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Called by proc~~destroy_crs~~CalledByGraph proc~destroy_crs CRS%destroy_crs proc~destroy_transformer transformer%destroy_transformer proc~destroy_transformer->proc~destroy_crs Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Source Code subroutine destroy_crs ( my_crs ) !======================================================================================== class ( CRS ) :: my_crs ! my_crs % pj_obj = proj_destroy ( my_crs % pj_obj ); ! end subroutine destroy_crs","tags":"","loc":"proc\\destroy_crs.html"},{"title":"write_crs – ","text":"public  subroutine write_crs(my_crs, unit_, fmt) Type Bound CRS Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs integer :: unit_ character(len=*) :: fmt Calls proc~~write_crs~~CallsGraph proc~write_crs CRS%write_crs print_info print_info proc~write_crs->print_info proj_pj_info proj_pj_info proc~write_crs->proj_pj_info Help Graph Key Nodes of different colours represent the following: Graph Key Subroutine Subroutine Function Function Interface Interface Type Bound Procedure Type Bound Procedure Unknown Procedure Type Unknown Procedure Type Program Program This Page's Entity This Page's Entity Solid arrows point from a procedure to one which it calls. Dashed \narrows point from an interface to procedures which implement that interface.\nThis could include the module procedures in a generic interface or the\nimplementation in a submodule of an interface in a parent module. Source Code subroutine write_crs ( my_crs , unit_ , fmt ) !======================================================================================== class ( CRS ) :: my_crs integer :: unit_ character ( len =* ) :: fmt ! call print_info ( proj_pj_info ( my_crs % pj_obj )); ! end subroutine write_crs","tags":"","loc":"proc\\write_crs.html"},{"title":"transformer_utilities – ","text":"Uses stdlib_error stdlib_strings iso_c_binding CRS_utilities iso_fortran_env fproj_utilities module~~transformer_utilities~~UsesGraph module~transformer_utilities transformer_utilities fproj_utilities fproj_utilities module~transformer_utilities->fproj_utilities iso_c_binding iso_c_binding module~transformer_utilities->iso_c_binding iso_fortran_env iso_fortran_env module~transformer_utilities->iso_fortran_env module~crs_utilities CRS_utilities module~transformer_utilities->module~crs_utilities stdlib_error stdlib_error module~transformer_utilities->stdlib_error stdlib_strings stdlib_strings module~transformer_utilities->stdlib_strings module~crs_utilities->fproj_utilities module~crs_utilities->iso_c_binding module~crs_utilities->iso_fortran_env module~crs_utilities->stdlib_error module~crs_utilities->stdlib_strings stdlib_string_type stdlib_string_type module~crs_utilities->stdlib_string_type Help Graph Key Nodes of different colours represent the following: Graph Key Module Module Submodule Submodule Subroutine Subroutine Function Function Program Program This Page's Entity This Page's Entity Solid arrows point from a submodule to the (sub)module which it is\ndescended from. Dashed arrows point from a module or program unit to \nmodules which it uses. Derived Types type, public :: transformer Type-Bound Procedures generic, public :: create => create_from_crs_numbers , create_from_crs_strings procedure, public :: create_from_crs_numbers procedure, public :: create_from_crs_strings procedure, public :: destroy => destroy_transformer procedure, public :: transform => transform_values procedure, public :: transform_inverse => transform_inverse_values procedure, public :: write => write_transform Subroutines public  subroutine create_from_crs_numbers (my_transformer, code_from, code_to) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer integer :: code_from integer :: code_to public  subroutine create_from_crs_strings (my_transformer, string_from, string_to) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer character(len=*) :: string_from character(len=*) :: string_to public  subroutine destroy_transformer (my_transformer) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer public  subroutine transform_inverse_values (my_transformer, coord, display) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer real(kind=wp), dimension(:,:) :: coord logical, optional :: display public  subroutine transform_values (my_transformer, coord, display) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer real(kind=wp), dimension(:,:) :: coord logical, optional :: display public  subroutine write_transform (my_transformer, unit_, format_) Arguments Type Intent Optional Attributes Name class( transformer ) :: my_transformer integer :: unit_ character(len=*) :: format_","tags":"","loc":"module\\transformer_utilities.html"},{"title":"CRS_utilities – ","text":"Uses stdlib_string_type stdlib_error stdlib_strings iso_c_binding iso_fortran_env fproj_utilities module~~crs_utilities~~UsesGraph module~crs_utilities CRS_utilities fproj_utilities fproj_utilities module~crs_utilities->fproj_utilities iso_c_binding iso_c_binding module~crs_utilities->iso_c_binding iso_fortran_env iso_fortran_env module~crs_utilities->iso_fortran_env stdlib_error stdlib_error module~crs_utilities->stdlib_error stdlib_string_type stdlib_string_type module~crs_utilities->stdlib_string_type stdlib_strings stdlib_strings module~crs_utilities->stdlib_strings Help Graph Key Nodes of different colours represent the following: Graph Key Module Module Submodule Submodule Subroutine Subroutine Function Function Program Program This Page's Entity This Page's Entity Solid arrows point from a submodule to the (sub)module which it is\ndescended from. Dashed arrows point from a module or program unit to \nmodules which it uses. Used by module~~crs_utilities~~UsedByGraph module~crs_utilities CRS_utilities module~transformer_utilities transformer_utilities module~transformer_utilities->module~crs_utilities Help Graph Key Nodes of different colours represent the following: Graph Key Module Module Submodule Submodule Subroutine Subroutine Function Function Program Program This Page's Entity This Page's Entity Solid arrows point from a submodule to the (sub)module which it is\ndescended from. Dashed arrows point from a module or program unit to \nmodules which it uses. Derived Types type, public :: CRS Type-Bound Procedures procedure, public :: create_from_epsg_number procedure, public :: create_from_epsg_string procedure, public :: create_from_proj4 procedure, public :: destroy => destroy_crs procedure, public :: write => write_crs Subroutines public  subroutine create_from_epsg_number (my_crs, epsg_code) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs integer :: epsg_code public  subroutine create_from_epsg_string (my_crs, epsg_string) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs character(len=*) :: epsg_string public  subroutine create_from_proj4 (my_crs, proj_string) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs character(len=*) :: proj_string public  subroutine destroy_crs (my_crs) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs public  subroutine write_crs (my_crs, unit_, fmt) Arguments Type Intent Optional Attributes Name class( CRS ) :: my_crs integer :: unit_ character(len=*) :: fmt","tags":"","loc":"module\\crs_utilities.html"},{"title":"transformer_utilities.f90 – ","text":"This file depends on sourcefile~~transformer_utilities.f90~~EfferentGraph sourcefile~transformer_utilities.f90 transformer_utilities.f90 sourcefile~crs_utilities.f90 CRS_utilities.f90 sourcefile~transformer_utilities.f90->sourcefile~crs_utilities.f90 Help Graph Key Nodes of different colours represent the following: Graph Key Source File Source File This Page's Entity This Page's Entity Solid arrows point from a file to a file which it depends on. A file\nis dependent upon another if the latter must be compiled before the former\ncan be. Source Code module transformer_utilities use iso_fortran_env , only : wp => real64 ; use , intrinsic :: iso_c_binding ; use fproj_utilities , only : pj , pj_context , proj_context_create , proj_context_destroy ,& proj_create , proj_destroy , pj_coord , pj_fwd , pj_inv , pj_area , pj_context_default ,& proj_create_crs_to_crs , proj_trans , proj_associated , proj_pj_info , print_info ,& proj_create_crs_to_crs_from_pj , pj_info , proj_info ,& proj_trans_f , proj_trans_f1 , proj_trans_array , proj_errno , proj_is_deprecated ,& proj_as_wkt , pj_wkt2_2019 , strtofchar , proj_as_proj_string , proj_as_projjson use CRS_utilities , only : CRS ; use stdlib_strings , only : starts_with ; use stdlib_error , only : check , error_stop ; ! type transformer private type ( CRS ) :: from , to type ( pj_context ) :: pj_context_obj type ( pj_area ) :: area type ( pj ) :: pj_obj type ( pj_coord ), allocatable :: coord_values (:), original_values (:) contains procedure , public :: create_from_crs_numbers procedure , public :: create_from_crs_strings generic , public :: create => create_from_crs_numbers ,& create_From_crs_strings procedure , public :: destroy => destroy_transformer procedure , public :: transform => transform_values procedure , public :: transform_inverse => transform_inverse_values procedure , public :: write => write_transform end type transformer ! ! contains !======================================================================================== subroutine create_from_crs_numbers ( my_transformer , code_from , code_to ) !======================================================================================== class ( transformer ) :: my_transformer integer :: code_from , code_to ! character ( len = 13 ) :: proj_from , proj_to ! write ( proj_from , '(I8)' ) code_from ; write ( proj_to , '(I8)' ) code_to ; proj_from = \"EPSG:\" // trim ( proj_from ); proj_to = \"EPSG:\" // trim ( proj_to ); ! my_transformer % pj_obj = proj_create_crs_to_crs (& pj_context_default , & trim ( proj_from ) // c_null_char , & trim ( proj_to ) // c_null_char ,& my_transformer % area ); ! end subroutine create_from_crs_numbers !======================================================================================== subroutine create_from_crs_strings ( my_transformer , string_from , string_to ) !======================================================================================== class ( transformer ) :: my_transformer character ( len =* ) :: string_from , string_to ! if ( starts_with ( string_from , \"EPSG:\" ) . and . starts_with ( string_to , \"EPSG:\" )) then my_transformer % pj_obj = proj_create_crs_to_crs (& pj_context_default , & trim ( string_from ) // c_null_char , & trim ( string_to ) // c_null_char ,& my_transformer % area ); else call error_stop ( msg = \"The EPSG codes do not start with EPSG:\" ); endif end subroutine create_from_crs_strings !======================================================================================== subroutine destroy_transformer ( my_transformer ) !======================================================================================== class ( transformer ) :: my_transformer ! if ( allocated ( my_transformer % coord_values )) then deallocate ( my_transformer % coord_values ); endif ! if ( allocated ( my_transformer % original_values )) then deallocate ( my_transformer % original_values ); endif ! call my_transformer % from % destroy (); call my_transformer % to % destroy (); ! my_transformer % pj_obj = proj_destroy ( my_transformer % pj_obj ); ! end subroutine destroy_transformer !======================================================================================== subroutine transform_values ( my_transformer , coord , display ) !======================================================================================== class ( transformer ) :: my_transformer real ( kind = wp ), dimension (:,:) :: coord logical , optional :: display ! integer :: number_data , ierr , res ! if ( allocated ( my_transformer % coord_values )) then deallocate ( my_transformer % coord_values ); endif if ( allocated ( my_transformer % original_values )) then deallocate ( my_transformer % original_values ); endif ! write ( * , * ) 'Before assignment' ; number_data = size ( coord , 1 ); allocate ( my_transformer % coord_values ( number_data ), stat = ierr ); call check ( ierr == 0 , msg = 'Error while allocating memory for coord_values array' ); my_transformer % coord_values (:)% x = coord (:, 1 ); my_transformer % coord_values (:)% y = coord (:, 2 ); write ( * , * ) 'After assignment' ; my_transformer % original_values = my_transformer % coord_values ; ! res = proj_trans_f ( my_transformer % pj_obj , & pj_fwd , my_transformer % coord_values ); call check ( res == 0 , msg = 'Error during transformation' ); ! if ( present ( display )) then if ( display ) then call my_transformer % write ( 6 , '(I4,2f15.6)' ); endif endif ! end subroutine transform_values !======================================================================================== subroutine transform_inverse_values ( my_transformer , coord , display ) !======================================================================================== class ( transformer ) :: my_transformer real ( kind = wp ), dimension (:,:) :: coord logical , optional :: display ! integer :: res , i ! if ( allocated ( my_transformer % coord_values )) then deallocate ( my_transformer % coord_values ); endif if ( allocated ( my_transformer % original_values )) then deallocate ( my_transformer % original_values ); endif ! my_transformer % coord_values % x = coord (:, 1 ); my_transformer % coord_values % y = coord (:, 2 ); my_transformer % original_values = my_transformer % coord_values ; ! res = proj_trans_f ( my_transformer % pj_obj , & pj_inv , my_transformer % coord_values ); call check ( res == 0 , msg = 'Error during inverse transformation' ); if ( present ( display )) then if ( display ) then call my_transformer % write ( 6 , '(2f15.6)' ); endif endif ! end subroutine transform_inverse_values !======================================================================================== subroutine write_transform ( my_transformer , unit_ , format_ ) !======================================================================================== class ( transformer ) :: my_transformer integer :: unit_ character ( len =* ) :: format_ ! integer :: i ! if ( allocated ( my_transformer % coord_values )) then do i = 1 , size ( my_transformer % coord_values ); write ( unit_ , format_ ) i , my_transformer % coord_values ( i )% x ,& my_transformer % coord_values ( i )% y ; enddo endif ! end subroutine write_transform ! end module transformer_utilities","tags":"","loc":"sourcefile\\transformer_utilities.f90.html"},{"title":"CRS_utilities.f90 – ","text":"Files dependent on this one sourcefile~~crs_utilities.f90~~AfferentGraph sourcefile~crs_utilities.f90 CRS_utilities.f90 sourcefile~transformer_utilities.f90 transformer_utilities.f90 sourcefile~transformer_utilities.f90->sourcefile~crs_utilities.f90 Help Graph Key Nodes of different colours represent the following: Graph Key Source File Source File This Page's Entity This Page's Entity Solid arrows point from a file to a file which it depends on. A file\nis dependent upon another if the latter must be compiled before the former\ncan be. Source Code module CRS_utilities use iso_fortran_env , only : wp => real64 ; use , intrinsic :: iso_c_binding ; use fproj_utilities , only : pj , pj_context , proj_context_create , proj_context_destroy ,& proj_create , proj_destroy , pj_coord , pj_fwd , pj_inv , pj_area , pj_context_default ,& proj_create_crs_to_crs , proj_trans , proj_associated , proj_pj_info , print_info ,& proj_create_crs_to_crs_from_pj , pj_info , proj_info ,& proj_trans_f , proj_trans_f1 , proj_trans_array , proj_errno , proj_is_deprecated ,& proj_as_wkt , pj_wkt2_2019 , strtofchar , proj_as_proj_string , proj_as_projjson , NUMCHAR use stdlib_string_type , only : string_type , len ; use stdlib_strings , only : starts_with ; use stdlib_error , only : check , error_stop ; ! type CRS private character ( len = NUMCHAR ) :: epsg_string integer :: epsg_code character ( len = NUMCHAR ) :: proj_string type ( pj ) :: pj_obj contains procedure , public :: create_from_epsg_number procedure , public :: create_from_epsg_string procedure , public :: create_from_proj4 procedure , public :: destroy => destroy_crs !generic,operator (==) => crs_equal procedure , public :: write => write_crs end type CRS ! contains !======================================================================================== subroutine create_from_epsg_number ( my_crs , epsg_code ) !======================================================================================== class ( CRS ) :: my_crs integer :: epsg_code ! character ( len = 8 ) :: current_epsg_number ! Check if epsg_code starts with \"EPSG:\" my_crs % epsg_code = epsg_code ; write ( current_epsg_number , '(I8)' ) epsg_code ; my_crs % epsg_string = 'EPSG:' // trim ( current_epsg_number ); write ( * , * ) 'EPSG String= ' , trim ( my_crs % epsg_string ); my_crs % pj_obj = proj_create ( pj_context_default , trim ( my_crs % epsg_string ) // & c_null_char ); ! end subroutine create_from_epsg_number !======================================================================================== subroutine create_from_epsg_string ( my_crs , epsg_string ) !======================================================================================== class ( CRS ) :: my_crs character ( len =* ) :: epsg_string ! if ( starts_with ( trim ( epsg_string ), \"EPSG:\" )) then my_crs % epsg_string = trim ( epsg_string ); my_crs % pj_obj = proj_create ( pj_context_default , trim ( my_crs % epsg_string ) // & c_null_char ); else call error_stop ( msg = \"The EPSG code does not start with EPSG:\" ); endif ! end subroutine create_from_epsg_string !======================================================================================== subroutine create_from_proj4 ( my_crs , proj_string ) !======================================================================================== class ( CRS ) :: my_crs character ( len =* ) :: proj_string ! my_crs % proj_string = trim ( proj_string ); my_crs % pj_obj = proj_create ( pj_context_default , trim ( my_crs % proj_string ) // & c_null_char ); ! end subroutine create_from_proj4 !======================================================================================== subroutine destroy_crs ( my_crs ) !======================================================================================== class ( CRS ) :: my_crs ! my_crs % pj_obj = proj_destroy ( my_crs % pj_obj ); ! end subroutine destroy_crs ! !======================================================================================== subroutine write_crs ( my_crs , unit_ , fmt ) !======================================================================================== class ( CRS ) :: my_crs integer :: unit_ character ( len =* ) :: fmt ! call print_info ( proj_pj_info ( my_crs % pj_obj )); ! end subroutine write_crs end module CRS_utilities","tags":"","loc":"sourcefile\\crs_utilities.f90.html"}]}